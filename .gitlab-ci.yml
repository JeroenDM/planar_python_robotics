image: python:latest

pages:
  script:
  - pip install scipy
  - pip install numpy
  - pip install sphinx
  - cd docs
  - make html
  - mv ./build/html/ ../public/
  tags:
  - docker
  artifacts:
    paths:
    - public
  only:
  - master

##before_script:
##  - python -V

test:
  script:
  - pip install -r requirements.txt
  - echo "backend: Agg" > ~/.config/matplotlib/matplotlibrc
  - python -m pytest --doctest-modules --cov
  tags:
  - docker
  only:
  - master
